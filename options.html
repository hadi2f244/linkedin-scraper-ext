<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Settings: LinkedIn Job Details</title>
    <style>
        body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 20px; }
        label { display:block; margin: 8px 0 4px; font-weight: 600; }
        input[type="password"], textarea { width: 640px; max-width: 100%; }
        textarea { height: 160px; }
        .muted { color: #666; font-size: 12px; }
    </style>
</head>
<body>
<h1>Settings</h1>

<label>AI Provider</label>
<select id="ai-provider" style="width: 640px; max-width: 100%; padding: 6px; margin-bottom: 8px;">
    <option value="openai">OpenAI (Custom API Key)</option>
    <option value="copilot">GitHub Copilot (Free - Requires Subscription)</option>
    <option value="groq">Groq (Free Alternative - Recommended)</option>
    <option value="huggingface">Hugging Face (Free Alternative)</option>
</select>
<p class="muted">Choose your AI provider. Groq and Hugging Face offer free tiers that work globally.</p>

<!-- OpenAI Settings (shown when OpenAI is selected) -->
<div id="openai-settings">
    <label>OpenAI API Key</label>
    <input id="key" type="password" placeholder="sk-..." />

    <label>API Endpoint (Optional)</label>
    <input id="api-endpoint" type="text" placeholder="https://chats.qgpt.ir/api/chat/completions" style="width: 640px; max-width: 100%;" />
    <p class="muted">Leave empty to use default OpenAI endpoint (https://api.openai.com/v1/chat/completions). Use custom endpoint for proxies or alternative providers.</p>

    <label>AI Model</label>
    <input id="ai-model" type="text" placeholder="gpt-4o-mini" style="width: 640px; max-width: 100%;" />
    <p class="muted">Specify the AI model to use. Common options: gpt-4o-mini, gpt-4o, gpt-4-turbo, gpt-3.5-turbo, gpt-4.1 (for custom endpoints). Default: gpt-4o-mini</p>
</div>

<!-- Copilot Settings (shown when Copilot is selected) -->
<div id="copilot-settings" style="display: none;">
    <div id="copilot-auth-status" style="padding: 12px; margin: 12px 0; border-radius: 4px; background: #f5f5f5;">
        <p style="margin: 0 0 8px 0;"><strong>GitHub Copilot Authentication</strong></p>
        <p id="copilot-status-text" class="muted" style="margin: 0 0 8px 0;">Not authenticated</p>
        <button id="copilot-auth-btn" style="padding: 8px 16px; cursor: pointer;">Authenticate with GitHub</button>
        <button id="copilot-logout-btn" style="padding: 8px 16px; cursor: pointer; display: none; margin-left: 8px; background: #d32f2f; color: white; border: none; border-radius: 4px;">Logout</button>
    </div>

    <div style="padding: 12px; background: #e3f2fd; border-radius: 4px; margin: 12px 0;">
        <p style="margin: 0 0 8px 0;"><strong>üìù How to Authenticate:</strong></p>
        <ol style="margin: 0; padding-left: 20px;">
            <li>Click "Authenticate with GitHub" button above</li>
            <li>You'll be redirected to <strong>https://github.com/login/device</strong></li>
            <li>Enter the code shown in the popup</li>
            <li>Authorize the application with your GitHub account</li>
            <li>Make sure you have <strong>GitHub Copilot</strong> enabled on your account</li>
        </ol>
        <p style="margin: 8px 0 0 0;" class="muted"><strong>Note:</strong> You need an active GitHub Copilot subscription or access through GitHub Education/Sponsors.</p>
    </div>
</div>

<label>Prompt</label>
<textarea id="prompt"></textarea>

<label style="margin-top: 16px;">
    <input type="checkbox" id="auto-send" />
    Automatically send to ChatGPT when job data loads
</label>
<p class="muted" style="margin-left: 20px;">When enabled, the extension will automatically send job details to ChatGPT as soon as they are loaded.</p>

<label style="margin-top: 16px;">Keywords to Search (comma-separated)</label>
<input id="keywords" type="text" placeholder="e.g., cicd, kubernetes, docker, python" style="width: 640px; max-width: 100%;" />
<p class="muted">Enter keywords separated by commas. The extension will check if these keywords exist in the job description.</p>

<label style="margin-top: 16px;">Bad Keywords / Keywords to Avoid (comma-separated)</label>
<input id="bad-keywords" type="text" placeholder="e.g., Azure, relocation required, on-site only" style="width: 640px; max-width: 100%;" />
<p class="muted">Enter keywords you want to avoid. Jobs containing these keywords will be flagged.</p>

<h2 style="margin-top: 32px; border-top: 2px solid #e0e0e0; padding-top: 20px;">Job Listing Badge Scanner</h2>
<p class="muted">Automatically scan job listings in the left panel and display badges for quick filtering.</p>

<label style="margin-top: 16px;">
    <input type="checkbox" id="enable-badge-scanner" />
    Enable automatic badge scanning on job listings
</label>
<p class="muted" style="margin-left: 20px;">When enabled, the extension will automatically scan visible job listings when you load or refresh the LinkedIn jobs page and display badges based on your criteria. When disabled, badges will not be shown automatically (useful for testing or reducing API calls).</p>

<label style="margin-top: 16px;">
    <input type="checkbox" id="enable-visa-badge" />
    Show visa sponsorship badge
</label>
<p class="muted" style="margin-left: 20px;">Display a badge on jobs that mention visa sponsorship in their description.</p>

<label style="margin-top: 16px;">Badge Keywords (one per line, format: keyword|color)</label>
<textarea id="badge-keywords" placeholder="kubernetes|#4caf50&#10;docker|#2196F3&#10;python|#ff9800&#10;aws|#f44336" style="height: 120px; width: 640px; max-width: 100%;"></textarea>
<p class="muted">Enter keywords to display as badges. Format: keyword|hexcolor (e.g., kubernetes|#4caf50). One per line. Leave color empty to use default.</p>

<h2 style="margin-top: 32px; border-top: 2px solid #e0e0e0; padding-top: 20px;">Cover Letter Settings</h2>
<p class="muted">Customize the AI prompt used to generate cover letters. Use variables to insert job-specific information.</p>

<label style="margin-top: 16px;">Cover Letter Prompt Template</label>
<textarea id="cover-letter-prompt" placeholder="You are a professional career advisor..." style="height: 200px; width: 640px; max-width: 100%;"></textarea>
<p class="muted">
    <strong>Available variables:</strong><br>
    ‚Ä¢ <code>{job_title}</code> - The job title<br>
    ‚Ä¢ <code>{company_name}</code> - The company name<br>
    ‚Ä¢ <code>{job_description}</code> - The full job description<br>
    ‚Ä¢ <code>{resume}</code> - Your uploaded resume text<br><br>
    <strong>Example:</strong> "Based on my resume and the job description for {job_title} at {company_name}, write a compelling cover letter..."
</p>

<label style="margin-top: 16px;">Resume / CV (PDF)</label>
<input id="resume-file" type="file" accept=".pdf" style="margin-bottom: 8px;" />
<p class="muted">Upload your resume in PDF format. This will be used to generate tailored cover letters.</p>
<div id="resume-status" class="muted" style="margin-top: 8px;"></div>

<label style="margin-top: 16px;">UK Visa Sponsorship CSV File</label>
<input id="csv-file" type="file" accept=".csv" style="margin-bottom: 8px;" />
<p class="muted">Upload the UK Worker and Temporary Worker CSV file from <a href="https://www.gov.uk/government/publications/register-of-licensed-sponsors-workers" target="_blank">gov.uk</a></p>
<div id="csv-status" class="muted" style="margin-top: 8px;"></div>

<div style="margin-top:10px">
    <button id="save">Save</button>
    <span id="status" class="muted"></span>
</div>

<script src="pdf.min.js"></script>
<script src="copilot-auth.js"></script>
<script src="options.js"></script>
</body>
</html>